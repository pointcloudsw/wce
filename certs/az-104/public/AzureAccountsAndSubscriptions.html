<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azure Training</title>
    <link rel="stylesheet" href="./styles/default.css">
    <script src="./highlight.min.js"></script>
    <script defer src="./modules/js/paster.js"></script>
    <style>
        * {
            --exterior-margin-left: 10px;
            --outline-indent-factor: 2;
        }
        body {
            /* background: #010138; */
            background: color(display-p3 .1 .1 .15 / .98);
            /* color: color(display-p3 .8 .8 .8 / 1); */
            color: rgb(227, 227, 227);
            color: color(display-p3 0.75 0.8 0.75 / .9);

            font-size: 1.5rem;
            padding: 2ch 1ch;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            font-kerning: auto;
        }
        section.subject_title {
            text-align: center;
            text-decoration: underline;
        }
        .term {
            font-weight: 600;
            text-decoration: underline;
        }

        .def::before {
            content: '\0020\0020\2014\0020';
        }

        summary.h4 {
            font-weight: 600;
        }

        .table-02 {
            display: grid;
            grid: repeat(4, 1fr) / repeat(2, 1fr);
            grid-auto-flow: column;
            gap: 5% 15%;
            inline-size: 90%;
            block-size: 90%;
            margin: 0% 10% 2%;
            padding: 0px 5px 5px 0px;
        }

        .table-03 {
            display: grid;
            grid: repeat(auto-fit, minmax(50px, 1fr)) / 20% repeat(2, minmax(20ch, 1fr));
            list-style: none;
            gap: 15px 30px;
            block-size: auto;
        }

        .table-03>li:nth-of-type(-n + 3) {
            font-weight: 600;
            border-bottom: 1px solid white;
        }

        .bullets li {
            margin: 0.0rem 1.0rem 1.5rem 0.8rem;
            color: green;
        }
        ul.nolstyle {
            list-style: none;
        }

        h2.title {
            text-align: center;
            text-decoration: underline;
            font-weight: 400;
        }

        img {
            margin: 0;
            padding: 0 20%;
        }

        section>h3 {
            border-bottom: 1px solid white;
            padding-bottom: 15px;
        }

        main {
            counter-reset: sections;
        }

        main>section {
            counter-reset: articles 0;
        }

        main>section>details
        , main>section>details>* {
            margin-left: calc(var(--exterior-margin-left) * var(--outline-indent-factor) * 1);
        }
        main>section>details>details
        , main>section>details>details>* {
            margin-left: calc(var(--exterior-margin-left) * var(--outline-indent-factor) * 2);
        }
        main>section>details>summary ~ *        
        , main>section>details>details>details {
            margin-left: calc(var(--exterior-margin-left) * var(--outline-indent-factor) * 4);
        }
        main>section>details>details>details>summary ~ * {
            margin-left: calc(var(--exterior-margin-left) * var(--outline-indent-factor) * 4.2);
        }

        main>section>details {
            counter-reset: summary-h5;
        }
        main>section>details>details {
            counter-reset: summary-h6;
        }

        main>section>h3::before {
            margin-right: 20px;
            counter-increment: sections;
            content: counter(sections, upper-latin) '.';

        }

        main>section>details>summary {
            list-style-position: outside;
        }

        main>section>article>h4::before,
        main>section>details>summary.h4::before {
            counter-increment: articles;
            content: '\0020' counter(articles) '.\0020\0020';
            white-space: pre-line;
        }

        details>summary.h4>a::after {
            content: attr(data-title);
            color: color(display-p3 0.1 0.5 0.68 / 1.0);

        }

        main>section>details>details>summary.h5::before {
            counter-increment: summary-h5;
            content: counter(summary-h5, upper-latin) '.';
        }
        main>section>details>details>details>summary.h6::before {
            counter-increment: summary-h6;
            content: counter(summary-h6, lower-roman) ') ';
        }

        section>details {
            padding-bottom: 20px;
        }

        main>section>p {
            padding: 1px 30px;
        }

        section.title {
            text-align: center;
        }

        .table-01 li
        , .table-04 li {
            display: grid;
            /* grid: auto / minmax(5ch, 20%) 1fr; */
            grid: auto;
            gap: 2px;
        }
        code {
            text-wrap: wrap;
        }
        code.bg {
            background: color(display-p3 0.8 0.90 0.75 / 0.6);
        }
        h4:has(+ .table-01) {
            border-bottom: 1px solid white;
        }

        .table-01:last-child {
            border-bottom: 1px solid white;
        }

        .table-01 li * {
            margin: auto 2px 5px 2px;
            padding: auto 0 1rem 1rem;
        }

        .table-01 h4 {
            padding: auto 3rem 0 0;
        }

        @media screen and (min-width: 500px) {
            .table-04 {
                /* grid-auto-flow: column; */
                grid: 1fr / minmax(5ch, 20%) minmax(50ch, 200px);
            }

        }
        @media print {
            html {
                inline-size: 8.5in;
                /* margin: 0.5in 2.0in 0.5in 0in; */
                padding: 0.15in 0.5in 0.25in;
                /* place-content: start start; */

            }
        }
    </style>
</head>

<body>
    <section class="title">
        AZ-104 Certification
    </section>
    <header>

        <section class="subject_title">
            Azure Subscriptions
        </section>
        <br />
    </header>
    <main>
        <br />
        <h2 class="title">Azure Subscriptions</h2>
        <p>
        </p>
        <section>
            <h3>TERMINOLOGY</h3>
            <p>
                <span class="term">Azure Account</span>
                <span class="def">
                    An identity in Microsoft Entra ID or a directory that's
                    trusted by Microsoft Entra ID, such as a work or school account.
                </span>
            </p>
            <p>
                <span class="term">Azure Landing Zone</span>
                <span class="def">
                    An Azure landing zone is an environment that follows key design principles across eight design
                    areas:
                    <ol class="table-02">
                        <li>Azure billing and Microsoft Entra tenant</li>
                        <li>Identity and access management</li>
                        <li>Management group and subscription organization</li>
                        <li>Network topology and connectivity</li>
                        <li>Security</li>
                        <li>Management</li>
                        <li>Governance</li>
                        <li>Platform automation and DevOps</li>
                    </ol>
                    <br>
                    <p>
                        These design principles accommodate all application portfolios and enable application migration,
                        modernization, and innovation at scale. An Azure landing zone uses subscriptions to isolate and
                        scale application resources and platform resources. Subscriptions for application resources are
                        called application landing zones, and subscriptions for platform resources are called platform
                        landing zones.
                    </p>
                </span>
            </p>
            <p>
                <span class="term">Azure Management Groups</span>
                <span class="def">
                    Azure Management Groups provide a governance scope above subscriptions. When you organize
                    subscriptions into management groups, the governance conditions that you apply cascade by
                    inheritance to all associated subscriptions which enables you to efficiently manage access,
                    policies, and compliance for those subscriptions.
                </span>
            </p>
            <p>
                <span class="term">Security Principals</span>
                <span class="def">
                    A security principal is any entity that can be authenticated by the operating system, such as a user
                    account, a computer account, or a thread or process that runs in the security context of a user or
                    computer account, or the security groups for these accounts. Security principals have long been a
                    foundation for controlling access to securable resources on Windows computers. Each security
                    principal is represented in the operating system by a unique security identifier (SID).
                </span>
            </p>
            <p>
                <span class="term">Service Principal</span>
                <span class="def">A Microsoft Entra service principal is the local representation of an application
                    object in a tenant or directory. Service principals are security objects within a Microsoft Entra
                    application that define what an application can do in a given tenant. They're set up in the Azure
                    portal during the application registration process and configured to access Azure resources, like
                    Azure DevOps. By adding service principals into your organization and setting up permissions on top
                    of them, we can determine whether a service principal is authorized to access your organizational
                    resources and which ones. In other words, they're the identity of the application instance. A
                    service principal is created in each tenant where the application is used and references the
                    globally unique application object. The tenant secures the service principal sign-in and access to
                    resources.
                    <br>
                    <br>
                    A single-tenant application has one service principal in its home tenant. A multi-tenant web
                    application or API requires a service principal in each tenant. A service principal is created when
                    a user from that tenant consents to use of the application or API. This consent creates a
                    one-to-many relationship between the multi-tenant application and its associated service principals.
                    <br>
                    <br>
                    A multi-tenant application is homed in a tenant and has instances in other tenants. Most
                    software-as-a-service (SaaS) applications accommodate multi-tenancy. Use service principals to
                    ensure the needed security posture for the application, and its users, in single- and multi-tenant
                    scenarios.

                </span>
            </p>
            <p>
                <span class="term">Managed Identities</span>
                <span class="def">A Microsoft Entra feature that acts similarly to an application's service principals.
                    Managed Identities are objects that provide identities for Azure resources and allow an easy way for
                    services that support Microsoft Entra authentication to share credentials. They're an appealing
                    option because Microsoft Entra ID takes care of credential management and rotation. While setup for
                    a managed identity might look different on the Azure portal, Azure DevOps treats both security
                    objects the same as a new identity in an organization with defined permissions. Throughout the rest
                    of this article, we refer to managed identities and service principals interchangeably as service
                    principal, unless specified.</span>
            </p>
            <p><span class="term">Azure Region</span>
                <span class="def">a geographical area on the planet containing at least one, but potentially multiple
                    datacenters. The datacenters are in close proximity and networked together with a low-latency
                    network. A few examples of regions are West US, Canada Central, West
                    Europe, Australia East, and Japan West.</span>
            </p>
            <p><span class="term">Azure Region Pairs</span>
                <span class="def">Most Azure regions are paired with another region within the same geography to make a
                    regional pair (or paired regions). Regional pairs help to
                    support always-on availability of Azure resources used by your infrastructure.</span>
            </p>
            <p><span class="term">Azure Subscription</span>
                <span class="def">A logical unit of Azure services linked to an Azure account. Azure Subscriptions help
                    organize access to Azure cloud service resources and help
                    control how resource usage is reported, billed, and paid.
                </span>
            </p>
            <p><span class="term">Azure Virtual Network Gateway</span>
                <span class="def">A VPN gateway is a type of virtual network gateway that sends encrypted traffic
                    between a virtual network and an on-premises location across a public connection. You can also use a
                    VPN gateway to send traffic between virtual networks across the Azure backbone. A VPN gateway
                    connection relies on the configuration of multiple resources, each of which contains configurable
                    settings. Note that the Azure virtual network gateway type must be VPN. The type can't be Azure
                    ExpressRoute, which requires setting a Border Gateway Protocol (BGP) routing process.</span>
            </p>
        </section>
        <section>
            <h3>DETAILS</h3>
            <details>
                <summary class="h4"><a href="." data-title="Azure Account Hierarchy"></a></summary>
                <img src="azure-subscriptions-e855533e.png" alt="">
            </details>
            <details>
                <summary class="h4">Cost Mitigation Mechanisms</summary>
                <ul class="table-01">
                    <li>
                        <h4>
                            Reservations
                        </h4>
                        <p>
                            Save money by paying ahead. You can pay for one year or three years of virtual machine, SQL
                            Database compute capacity, Azure Cosmos DB throughput, or other Azure resources. Pre-paying
                            allows you to get a discount on the resources you use. Reservations can significantly reduce
                            your virtual machine, SQL database compute, Azure Cosmos DB, or other resource costs up to
                            72% on pay-as-you-go prices. Reservations provide a billing discount and don't affect the
                            runtime state of your resources.
                        </p>
                    </li>
                    <li>
                        <h4>
                            Azure Hybrid Benefits
                        </h4>
                        <p>
                            Access pricing benefits if you have a license that includes Software Assurance. Azure Hybrid
                            Benefits helps maximize the value of existing on-premises Windows Server or SQL Server
                            license investments when migrating to Azure. There's an Azure Hybrid Benefit Savings
                            Calculator to help you determine your savings.
                        </p>
                    </li>
                    <li>
                        <h4>
                            Azure Credits
                        </h4>
                        <p>
                            Use the monthly credit benefit to develop, test, and experiment with new solutions on Azure.
                            As a Visual Studio subscriber, you could use Microsoft Azure at no extra charge. With your
                            monthly Azure credit, Azure is your personal sandbox for development and testing.
                        </p>
                    </li>
                    <li>
                        <h4>
                            Azure Regions
                        </h4>
                        <p>
                            Compare pricing across regions. Pricing can vary from one region to another, even in the US.
                            Double check the pricing in various regions to see if you can save by selecting a different
                            region for your subscription.
                        </p>
                    </li>
                    <li>
                        <h4>
                            Azure Budgets
                        </h4>
                        <p>
                            Apply the budgeting features in Microsoft Cost Management to help plan and drive
                            organizational accountability. With budgets, you can account for the Azure services you
                            consume or subscribe to during a specific period. Monitor spending over time and inform
                            others about their spending to proactively manage costs. Use budgets to compare and track
                            spending as you analyze costs.
                        </p>
                    </li>
                    <li>
                        <h4>
                            Azure Pricing Calculator
                        </h4>
                        <p>
                            The Pricing Calculator provides estimates in all areas of Azure, including compute,
                            networking, storage, web, and databases.
                        </p>
                    </li>

                </ul>
            </details>
            <details>
                <summary class="h4">Azure RBAC Concepts</summary>
                <ul class="table-03">
                    <li>Concept</li>
                    <li>Description</li>
                    <li>Examples</li>
                    <li>Security principal</li>
                    <li>An object that represents something that requests access to resources. </li>
                    <li>User, group, service principal, managed identity</li>
                    <li>Role definition </li>
                    <li>A set of permissions that lists the allowed operations. Azure RBAC comes with built-in role
                        definitions, but you can also create your own custom role definitions. </li>
                    <li>Some built-in role definitions: Reader, Contributor, Owner, User Access Administrator
                    </li>
                    <li>Scope</li>
                    <li>The boundary for the requested level of access, or "how much" access is granted. </li>
                    <li>Management group, subscription, resource group, resource</li>
                    <li>Role assignment </li>
                    <li>An assignment attaches a role definition to a security principal at a particular scope. Users
                        can grant the access described in a role definition by creating (attaching) an assignment for
                        the role. </li>
                    <li>- Assign the User Access Administrator role to an admin group scoped to a management group
                        <br>
                        <br>
                        - Assign the Contributor role to a user scoped to a subscription
                    </li>

                </ul>
            </details>
            <details>
                <summary class="h4">Comparing Azure RBAC Roles and Entra ID Roles</summary>
                <ul class="table-03">
                    <li>Concept</li>
                    <li>Azure RBAC Roles</li>
                    <li>Entra ID Roles</li>
                    <li>Access management</li>
                    <li>Manages access to Azure resources</li>
                    <li>Manages access to Microsoft Entra resources</li>
                    <li>Scope assignment</li>
                    <li>Scope can be specified at multiple levels, including management groups, subscriptions, resource
                        groups, and resources</li>
                    <li>Scope is specified at the tenant level</li>
                    <li>Role definitions</li>
                    <li>Roles can be defined via the Azure portal, the Azure CLI, Azure PowerShell, Azure Resource
                        Manager templates, and the REST API</li>
                    <li>Roles can be defined via the Azure admin portal, Microsoft 365 admin portal, and Microsoft Graph
                        PowerShell</li>
                </ul>
            </details>
            <details>
                <summary class="h4">Fundamental Azure RBAC Roles</summary>
                <p><b>Owner</b> The Owner role has full access to all resources, including the right to delegate access
                    to others. The Service Administrator and Co-Administrators roles are assigned the Owner role at the
                    subscription scope.
                </p>
                <p><b>Contributor</b> The Contributor role can create and manage all types of Azure resources. This role
                    can't grant access to others.
                </p>
                <p><b>Reader</b> The Reader role can view existing Azure resources.
                </p>
                <p><b>User Access Administrator</b> The User Access Administrator role can manage user access to Azure
                    resources.
                </p>
            </details>
            <details>
                <summary class="h4">Azure Management Groups</summary>
                <details>
                    <summary class="h5">Management Groups</summary>
                    <p>Creating a management group and assigning all subscriptions to it allows for efficient management of access, policies, and compliance across all subscriptions. Applying policies and configuring role-based access control at the management group level ensures that these settings are inherited by all subscriptions within the group. Managing each subscription individually or applying policies and access control at the individual resource level would not be as efficient or unified.</p>
                </details>
                <details>
                    <summary class="h5">Management Scope</summary>
                    <p>Azure provides four levels of management scope: management groups, subscriptions, resource groups,
                        and resources. The following image shows an example of these layers.
                    </p>
                    <p>
                        <img src="./scope-levels.png" alt="">
                    </p>
                    <p>You apply management settings at any of these levels of scope. The level you select determines how
                        widely the setting is applied. Lower levels inherit settings from higher levels. For example, when
                        you apply a policy to the subscription, the policy is applied to all resource groups and resources
                        in your subscription. When you apply a policy on the resource group, that policy is applied to the
                        resource group and all its resources. However, another resource group doesn't have that policy
                        assignment.</p>
                    <p>For information about managing identities and access, see Microsoft Entra ID.</p>
                    <p>You can deploy templates to tenants, management groups, subscriptions, or resource groups.</p>
                </details>
            </details>
            <details>
                <summary class="h4">Azure High Availability Solutions</summary>
                <p>Availability sets and availability zones are designed to limit the impact of environmental issues at
                    the Azure level, such as datacenter failure, physical hardware failure, network outages, power
                    interruptions, and maintenance activities. <b>However, the two are mutually exclusive and cannot be
                        combined.</b>
                <p>Azure Backup is not a high-availability solution.</p>
                <p>The Always On options are for Microsoft SQL Server high availability only.</p>
                </p>
            </details>
        </section>
        <section>
            <h3>TOPICS</h3>
            <details>
                <summary class="h4">Azure Networking</summary>
                <details>
                    <summary class="h5">DNS</summary>
                    <details>
                        <summary class="h6">Scenario: Name resolution scoped to a single virtual network</summary>
                        <p>To associate a virtual network to a private DNS zone, you add the virtual network to the zone by creating a virtual network link.</p>
                        <p>Azure DNS Private Resolver is used to proxy DNS queries between on-premises environments and Azure DNS.</p>
                        <p>A custom DNS server will work if you deploy a DNS server as a virtual machine or an appliance, however, this configuration does not work with a private DNS zone.</p>
                    </details>
                    <details>
                        <summary class="h6">Azure Virtual Networks</summary>
                        <p>xyz</p>
                    </details>
                </details>
            </details>
            <details>
                <summary class="h4">Azure Storage</summary>
                <details>
                    <summary class="h5">Azure Storage Types</summary>
                    <details>
                        <p><ul>
                            <li>Consider Azure Blob Storage. Store vast amounts of unstructured data by using Azure Blob Storage. Blob stands for Binary Large Object. Blob Storage is often used for images and multimedia files.</li>
                            <li>Consider Azure Files. Provide fully managed file shares in the cloud with Azure Files. This storage data is accessible via the industry standard Server Message Block (SMB) protocol, Network File System (NFS) protocol, and the Azure Files REST API.</li>
                            <li>Consider Azure managed disks. Support Azure Virtual Machines by using Azure managed disks. These disks are block-level storage volumes managed by Azure. Managed disks perform like physical disks in an on-premises server, but in a virtual environment.</li>
                            <li>Consider Azure Queue Storage. Use Azure Queue Storage to store large numbers of messages. Queue Storage is commonly used to create a backlog of work to process asynchronously.</li>
                            </ul>
                        </p>
                    </details>
                    <summary class="h5">Azure Storage Recommendations</summary>
                    <details>
                        <p><img src="./images/AzureStorageRecsForDbAndCompute.png" width="80%"></p>
                    </details>
                </details>
            </details>
            <details>
                <summary class="h4">Microsoft Entra</summary>
                <details>
                    <summary class="h5">Roles for Least Privilege</summary>
                    <details>
                        <summary class="h6">Scenario: You need to manage user identities and governance within your Azure environment. What least privilege role should you assign to a new employee to enable him to create and manage user accounts and groups, manage support tickets, and monitor service health?</summary>
                        <p><b>Answer:  User Administrator</b></p>
                        <p>The User Administrator role allows creation and management of users and groups, managing support tickets, and monitoring service health. The Global Administrator has more permissions than required. The Billing Administrator is focused on financial aspects and the Service Administrator is a classic role with full access to Azure services, which is not required for user and group management.</p>
                        <p><b>Reference:  </b><a href="https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/permissions-reference#user-administrator">Microsoft Entra built-in roles</a></p>
                    </details>
                </details>
            </details>
        </section>
        <section>
            <script>
                const d = [ new navigator.clipboardItem()]
            </script>
            <h3>NOTES</h3>
            <details>
                <summary class="h4">Azure Policies</summary>
                <p>Azure Policy is a service in Azure that enables you to create, assign, and manage policies. Azure
                    Policy helps you define and implement your governance strategy by using policies to control and
                    audit your resources.</p>
                <ul>
                    <li>Azure Policy is a powerful service in Azure that enables you to enforce rules and ensure
                        compliance with corporate standards and service level agreements.</li>
                    <li>
                        Management groups provide a way to efficiently manage access, policies, and compliance across
                        multiple subscriptions, allowing for unified policy and access management.
                    </li>
                    <li>
                        Creating policy definitions and initiative definitions allows you to define conventions for
                        resources and control the scope of policies, ensuring resource compliance.
                    </li>
                    <li>
                        The Compliance feature in Azure Policy helps you determine the compliance state of your
                        resources and evaluate whether they're compliant or non-compliant.</li>
                </ul>
            </details>
            <details>
                <summary class="h4">Azure Regions</summary>
                <ul>
                    <li>Azure is generally available in more than 60 regions in 140 countries.</li>
                    <li>Azure has more global regions than any other cloud provider.</li>
                    <li>Regions provide you with the flexibility and scale needed to bring applications closer to
                        your users.</li>
                    <li>Regions preserve data residency and offer comprehensive compliance and resiliency options
                        for customers.</li>
                    </li>
                </ul>
            </details>
            <details>
                <summary class="h4">Characteristics of Azure Region Pairs</summary>
                <ul class="table-01">
                    <li>
                        <h4>Physical isolation</h4>
                        <p>Azure prefers at least <b>300 miles</b> of separation between datacenters in a regional
                            pair. This principle isn't practical or possible in all geographies. Physical datacenter
                            separation reduces the likelihood of natural disasters, civil unrest, power outages, or
                            physical network outages affecting both regions at once.</p>
                    </li>
                    <li>
                        <h4>Platform-provided replication</h4>
                        <p>Azure prefers at least 300 miles of separation between datacenters in a regional pair.
                            This principle isn't practical or possible in all geographies. Physical datacenter
                            separation reduces the likelihood of natural disasters, civil unrest, power outages, or
                            physical network outages affecting both regions at once.</p>
                    </li>
                    <li>
                        <h4>Region recovery order</h4>
                        <p>During a broad outage, recovery of one region is prioritized out of every pair.
                            Applications that are deployed across paired regions are guaranteed to have one of the
                            regions recovered with priority.</p>
                    </li>
                    <li>
                        <h4>Sequential updates</h4>
                        <p>Planned Azure system updates are rolled out to paired regions sequentially (not at the
                            same time). Rolling updates minimizes downtime, reduces bugs, and logical failures in
                            the rare event of a bad update.</p>
                    </li>
                    <li>
                        <h4>Data residency</h4>
                        <p>Regions reside within the same geography as their enabled set (except for the Brazil
                            South and Singapore regions).</p>
                    </li>
                </ul>
            </details>
            <details>
                <summary class="h4">Considerations for Azure Regions and Azure Region Pairs</summary>
                <ul class="bullets">
                    <li><b>Resource and region deployment</b> Plan the regions where you want to deploy your
                        resources. For most Azure services, when you deploy a resource in Azure, you choose the
                        region where you want your resource to be deployed.</li>
                    <li><b>Service support by region</b> Research region and service availability. Some services or
                        Azure Virtual Machines features are available only in certain regions, such as specific
                        Virtual Machines sizes or storage types.</li>
                    <li><b>Services that don't require regions</b> Identify services that don't need region support.
                        Some global Azure services that don't require you to select a region. These services include
                        Microsoft Entra ID, Microsoft Azure Traffic Manager, and Azure DNS.</li>
                    <li><b>Exceptions to region pairing</b> Check the Azure website for current region availability
                        and exceptions. If you plan to support the Brazil South region, note this region is paired
                        with a region outside its geography. The Singapore region also has an exception to standard
                        regional pairing.</li>
                    <li><b>Data residency</b> Take advantage of the benefits of data residency offered by regional
                        pairs. This feature can help you meet requirements for tax and law enforcement jurisdiction
                        purposes.</li>
                </ul>
            </details>
            <details>
                <summary class="h4">Azure Subscriptions</summary>
                <ul class="bullets">
                    <li>Every Azure cloud service belongs to a subscription.
                    </li>
                    <li>
                        Each subscription can have a different billing and payment configuration.
                    </li>
                    <li>
                        Multiple subscriptions can be linked to the same Azure account.
                    </li>
                    <li>
                        More than one Azure account can be linked to the same subscription.
                    </li>
                    <li>
                        Billing for Azure services is done on a per-subscription basis.
                    </li>
                    <li>
                        If your Azure account is the only account associated with a subscription, you're responsible
                        for the billing requirements.
                    </li>
                    <li>
                        Programmatic operations for a cloud service might require a subscription ID.
                    </li>
                    <li>Azure has more global regions than any other cloud provider.</li>
                    <li>Regions provide you with the flexibility and scale needed to bring applications closer to
                        your users.</li>
                    <li>Regions preserve data residency and offer comprehensive compliance and resiliency options
                        for customers.</li>
                    </li>
                </ul>
            </details>
            <details>
                <summary class="h4">Considerations for Azure Subscriptions</summary>
                <p>Consider how many subscriptions your organization needs to support the business scenarios. As you
                    plan, think about how you can organize your resources into resource groups.</p>
                <ul class="bullets">
                    <li>
                        <b>
                            Types of Azure accounts required
                        </b>
                        Determine the types of Azure accounts your users will link with Azure subscriptions. You can
                        use a Microsoft Entra account or a directory that's trusted by Microsoft Entra ID like a
                        work or school account. If you don't belong to one of these organizations, you can sign up
                        for an Azure account by using your Microsoft Account, which is also trusted by Microsoft
                        Entra ID.
                    </li>
                    <li>
                        <b>
                            Multiple subscriptions
                        </b>
                        Set up different subscriptions and payment options according to your company's departments,
                        projects, regional offices, and so on. A user can have more than one subscription linked to
                        their Azure account, where each subscription pertains to resources, access privileges,
                        limits, and billing for a specific project.
                    </li>
                    <li>
                        <b>
                            Dedicated shared services subscription
                        </b>
                        Plan for how users can share resources allocated in a single subscription. Use a shared
                        services subscription to ensure all common network resources are billed together and
                        isolated from other workloads. Examples of shared services subscriptions include Azure
                        ExpressRoute and Virtual WAN.
                    </li>
                    <li>
                        <b>
                            Consider access to resources
                        </b>
                        Every Azure subscription can be associated with a Microsoft Entra ID. Users and services
                        authenticate with Microsoft Entra ID before they access resources.
                    </li>
                </ul>
            </details>
            <details>
                <summary class="h4">Recap of Azure RBAC</summary>
                <ul class="bullets">
                    <li>
                        Azure RBAC is a system that enables granular access management of Azure resources. It allows you
                        to segregate duties within a team and grant users specific access based on their job
                        requirements.

                    </li>
                    <li>
                        Role definitions in Azure RBAC define sets of permissions that list the allowed operations. You
                        can use built-in role definitions or create custom role definitions to meet the specific
                        requirements of your organization.

                    </li>
                    <li>
                        Role assignments attach role definitions to security principals at a particular scope. This
                        assignment determines the level of access granted to the requestor. Access can be revoked by
                        removing a role assignment.

                    </li>
                    <li>
                        Azure RBAC roles can be assigned at different scopes, including management groups,
                        subscriptions, resource groups, and resources. The scope limits the permissions available to the
                        assigned requestor.
                    </li>
                    <li>
                        Azure RBAC roles and Entra ID administrator roles can be used together to manage access to both
                        Azure resources and Entra ID resources.
                    </li>
                </ul>
            </details>
            <details>
                <summary class="h4">Azure Advisor</summary>
                <p>Whenever Azure Advisor detects a new recommendation for resources, an event is stored in the Azure Activity log. You can set up alerts for these events from Azure Advisor. You can select a subscription and optionally a resource group to specify the resources for which you want to receive alerts. You also need to create an action group that will contain all the users to be notified.</p>
                <!-- <ul class="bullets"><li></li></ul> -->
            </details>
            <details>
                <summary class="h4">Azure Backup</summary>
                <p>You can choose to store between one and five instant recovery snapshots and the default value is two. However, when the backup schedule frequency is weekly, you must retain five instant recovery snapshots.</p>
                <!-- <ul class="bullets"><li></li></ul> -->
            </details>
            <details>
                <summary class="h4">Azure IP Flow Verify</summary>
                <p>IP flow verify lets you specify a source and destination IPv4 address, port, protocol (TCP or UDP), and traffic direction (inbound or outbound). IP flow verify can identify the specific network security group (NSG) that prevents communication. NSG flow logs is a feature of Azure Network Watcher that allows you to log information about IP traffic flowing through an NSG. Although the logs may help you identify the source of the issue, it requires much more configuration and manual evaluation. Packet capture allows you to create packet capture sessions to track traffic to and from a virtual machine. Packet capture may help narrow down the scope of the issue, but it will not identify the specific NSG that prevents communication.</p>
                <!-- <ul class="bullets"><li></li></ul> -->
            </details>
        </section>
        <section>
            <h3>QUESTIONS</h3>
            <details>
                <summary class="h4">What's the difference between Azure Compute Gallery (ACG) and Azure Container Registry (ACR)?</summary>
                <p>Azure Compute Gallery and Azure Container Registry serve different purposes within the Azure ecosystem:</p>
                <h4>Azure Compute Gallery</h4>
                <ul class="nolstyle">
                    <li><b>Purpose</b>: It helps you manage and share VM images and applications.</li>
                    <li><b>Features</b>:
                        <ul>
                            <li><b>Global Replication</b>: Allows you to replicate images across multiple regions for high availability and disaster recovery<a href="#fn-01-01">¹</a>.</li>
                            <li><b>Versioning and Grouping</b>: Facilitates easier management by versioning and grouping resources<a href="#fn-01-01">¹</a>.</li>
                            <li><b>Sharing</b>: You can share resources across subscriptions, Active Directory tenants, or even publicly<a href="#fn-01-01">¹</a>.</li>
                            <li><b>Scaling</b>: Supports scaling deployments with resource replicas in each region<a href="#fn-01-01">¹</a>.</li>
                        </ul>
                    </li>
                </ul>
                <h4>Azure Container Registry</h4>
                <ul class="nolstyle">
                    <li><b>Purpose</b>: It is a managed Docker registry service for storing and managing container images and related artifacts.</li>
                    <li><b>Features</b>:
                        <ul>
                            <li><b>Geo-Replication</b>: Supports global distribution and reliability for network-close deployments<a href="#fn-01-02">²</a>.</li>
                            <li><b>Integrated Authentication</b>: Provides secure access with integrated Azure Active Directory authentication<a href="#fn-01-02">²</a>.</li>
                            <li><b>Artifact Support</b>: Manages a variety of artifacts including Docker images, Helm charts, and OCI image formats<a href="#fn-01-02">²</a>.</li>
                            <li><b>Namespace Management</b>: Allows for organizing repositories with namespaces for better management and isolation<a href="#fn-01-03">³</a>.</li>
                        </ul>
                    </li>
                </ul>
                <p>In summary, **Azure Compute Gallery** is ideal for managing and sharing VM images and applications, while **Azure Container Registry** is designed for storing and managing container images and related artifacts. Both services offer robust features for replication, security, and management, but they cater to different aspects of cloud resource management.</p>
                <p>Source: Conversation with Copilot, 10/9/2024</p>
                <ul class="nolstyle">
                    <li id="fn-01-01"><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/azure-compute-gallery">¹ Overview of Azure Compute Gallery - Azure Virtual Machines.</a></li>
                    <li id="fn-01-02"><a href="https://learn.microsoft.com/en-us/azure/container-registry/container-registry-concepts">² About Registries, Repositories, Images, and Artifacts - Azure Container Registry</a></li>
                    <li id="fn-01-03"><a href="https://learn.microsoft.com/en-us/azure/container-registry/container-registry-best-practices">³ Best Practices for Using Azure Container Registry - Azure Container Registry</a></li>
                </ul>
            </details>
        </section>        
        <section>
            <h3>DEMOs</h3>
            <details open>
                <summary class="h4">Create rg, vnet, subnets, bastion and VMs</summary>
                <ul class="table-04">
                    <li>
                        <h4>
                            Define and declare variables
                        </h4>
                        <pre><code class="bg">$tag = @{ Scope = 'Dev'; Users = 'jroll@kforce.com,'; Subject = 'az-104' }
$loc = 'centralus'
$cred = Get-Credential
</code></pre>
                    </li>
                    <li>
                        <h4>
                            Resource groups
                        </h4>
                        <pre><code class="bg">$rg00 = @{ name = 'jroll_rg00'; location = $loc; tag = $tag }
new-azresourceGroup @rg00</code></pre>
                    </li>
                    <li>
                        <h4>
                            Virtual networks
                        </h4>
                        <pre><code class="bg">$vn00parms = @{ name = 'jroll_vnet00'; location = $loc; resourcegroupname = $rg00.name; tag = $tag; addressprefix = '10.0.0.0/16' }
$virtualNetwork = new-azvirtualNetwork @vn00parms</code></pre>
                    </li>
                    <li>
                        <h4>
                            Subnets
                        </h4>
                        <pre><code class="bg">$sn00parms = @{ name = 'jroll_vnet00_sn00'; VirtualNetwork = $virtualNetwork; addressprefix = '10.0.0.0/24' }

# Subnet 0
$subnetConfig = add-AzVirtualNetworkSubnetConfig @sn00parms

$virtualNetwork | set-azvirtualNetwork

# Subnet 1
$sn01parms = @{ name = 'AzureBastionSubnet'; VirtualNetwork = $virtualNetwork; addressprefix = '10.0.1.0/26' }
$subnetConfig = add-AzVirtualNetworkSubnetConfig @sn01parms

$virtualNetwork | set-azvirtualNetwork

# Subnet 2
$sn02parms = @{ name = 'jroll_vnet00_sn02'; VirtualNetwork = $virtualNetwork; addressprefix = '10.0.2.0/24' }
$subnetConfig = add-AzVirtualNetworkSubnetConfig @sn02parms

$virtualNetwork | set-azvirtualNetwork</code></pre>
                    </li>
                    <li>
                        <h4>
                            Bastion with Static IP
                        </h4>
                        <pre><code class="bg"># Static IP
$bip = @{ name = 'bip'; location = $loc; resourcegroupname = $rg00.name; allocationmethod = 'Static'; Sku = 'Standard'; Zone = 1,2,3; Tag = $tag }
New-azPublicIpAddress @bip

# Bastion
$bastion = @{ name = 'bastion'; resourcegroupname = $rg00.name; publicipaddressname = $bip.name; publicipaddressrgname = $bip.resourcegroupname; virtualnetworkname = $vn00.name; virtualnetworkrgname = $vn00.resourcegroupname; Sku = 'Basic'; Tag = $tag }

new-AzBastion @bastion -asjob
</code></pre>
                    </li>
                    <li>
                        <h4>
                            Windows VM
                        </h4>
                        <pre><button type="button" class="copy-icon">Copy</button><code class="bg"># Windows VM
$wvm01 = @{ name = 'wvm01'; location = $loc; resourcegroupname = $rg00.name; image = 'MicrosoftWindowsServer:WindowsServer:2022-datacenter-azure-edition:latest'; virtualnetworkname = $vn00.name; subnetname = $vn00.Subnets[2].Name; openports = 80,3389; publicipaddressname = 'wvm01pubIp'; Tag = $tag }
New-azVm @wvm01 -asjob

# 
# Option B
# Set the administrator and password for the VM. ##
# 
$cred = Get-Credential

## Place the virtual network into a variable. ##
$vnet = Get-AzVirtualNetwork -Name $virtualNetwork.name -ResourceGroupName $rg00.name

## Create a network interface for the VM. ##
$nic0 = @{
    Name = "nic0"
    ResourceGroupName = $rg00.name
    Location = $loc
    Subnet = $vnet.Subnets[1]
}

$nicVM0 = New-AzNetworkInterface @nic0

## Create a virtual machine configuration. ##
$vmsz0 = @{
    VMName = "vm0"
    VMSize = 'Standard_DS1_v2'  
}

$vmos0 = @{
    ComputerName = "vm0"
    Credential = $cred
}

$vmimage0 = @{
    PublisherName = 'Canonical'
    Offer = '0001-com-ubuntu-server-jammy'
    Skus = '22_04-lts-gen2'
    Version = 'latest'    
}

$vmConfig0 = New-AzVMConfig @vmsz0 | Set-AzVMOperatingSystem @vmos0 -Linux | Set-AzVMSourceImage @vmimage0 | Add-AzVMNetworkInterface -Id $nicVM0.Id

## Create the VM. ##
$vm0 = @{
    ResourceGroupName = $rg00.name
    Location = $loc
    VM = $vmConfig0
}

New-AzVM @vm0


# VM1
## Create a network interface for the VM. ##
$nic1 = @{
    Name = "nic1"
    ResourceGroupName = $rg00.name
    Location = $loc
    Subnet = $vnet.Subnets[1]
}

$nicVM1 = New-AzNetworkInterface @nic1

## Create a virtual machine configuration. ##
$vmsz1 = @{
    VMName = "vm1"
    VMSize = 'Standard_DS1_v2'  
}

$vmos1 = @{
    ComputerName = "vm1"
    Credential = $cred
}

$vmimage1 = @{ publishername = MicrosoftWindowsServer; offer = WindowsServer; skus = 2022-datacenter-azure-edition; version = latest }

$vmConfig1 = New-AzVMConfig @vmsz1 | Set-AzVMOperatingSystem @vmos1 -Windows | Set-AzVMSourceImage @vmimage1 | Add-AzVMNetworkInterface -Id $nicVM1.Id

## Create the VM. ##
$vm1 = @{
    ResourceGroupName = $rg00.name
    Location = $loc
    VM = $vmConfig1
}

New-AzVM @vm1 -asjob 





# VM2
## Create a network interface for the VM. ##
$nic2 = @{
    Name = "nic2"
    ResourceGroupName = $rg00.name
    Location = $loc
    Subnet = $vnet.Subnets[1]
}

$nicVM2 = New-AzNetworkInterface @nic2

## Create a virtual machine configuration. ##
$vmsz2 = @{
    VMName = "vm2"
    VMSize = 'Standard_DS1_v2'  
}

$vmos2 = @{
    ComputerName = "vm2"
    Credential = $cred
}

$vmimage2 = @{ publishername = 'MicrosoftWindowsServer'; offer = 'WindowsServer'; skus = '2022-datacenter-azure-edition'; version = 'latest' }

$vmConfig2 = New-AzVMConfig @vmsz2 | Set-AzVMOperatingSystem @vmos2 -Windows | Set-AzVMSourceImage @vmimage2 | Add-AzVMNetworkInterface -Id $nicVM2.Id

## Create the VM. ##
$vm2 = @{
    ResourceGroupName = $rg00.name
    Location = $loc
    VM = $vmConfig2
    openports = '80,3389'
    publicipaddressname = 'wvm01pubIp'
    Tag = $tag
}

New-AzVM @vm2 -asjob 

</code></pre>
                    </li>
                </ul>
            </details>       
        </section>
        <pre>
            <code>
                <span class="ps-kw">Get-Process</span> |
                <span class="ps-kw">Where-Object</span> { $_.CPU -gt 100 } |
                <span class="ps-kw">Select-Object</span> -Property Name, CPU
Thanks for sharing your PowerShell script! Let's convert this into an ARM template. Your script creates a new public IP address with specific properties. Here's how you can translate that into an ARM template:

### PowerShell Script
```powershell
$bip = @{ name = 'bip'; location = $loc; resourcegroupname = $rg00.name; allocationmethod = 'Static'; Sku = 'Standard'; Zone = 1,2,3; Tag = $tag }
New-azPublicIpAddress @bip
```

### ARM Template
```json
{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
    "location": {
        "type": "string"
    },
    "resourceGroupName": {
        "type": "string"
    },
    "publicIpName": {
        "type": "string",
        "defaultValue": "bip"
    },
    "allocationMethod": {
        "type": "string",
        "defaultValue": "Static"
    },
    "sku": {
        "type": "string",
        "defaultValue": "Standard"
    },
    "zones": {
        "type": "array",
        "defaultValue": ["1", "2", "3"]
    },
    "tags": {
        "type": "object"
    }
    },
    "resources": [
    {
        "type": "Microsoft.Network/publicIPAddresses",
        "apiVersion": "2020-11-01",
        "name": "[parameters('publicIpName')]",
        "location": "[parameters('location')]",
        "sku": {
        "name": "[parameters('sku')]"
        },
        "properties": {
        "publicIPAllocationMethod": "[parameters('allocationMethod')]"
        },
        "zones": "[parameters('zones')]",
        "tags": "[parameters('tags')]"
    }
    ],
    "outputs": {
    "publicIpAddress": {
        "type": "string",
        "value": "[reference(resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIpName'))).ipAddress]"
    }
    }
}
```

### Explanation
- **Parameters**: These allow you to pass values into the template, making it reusable.
    - `location`, `resourceGroupName`, `publicIpName`, `allocationMethod`, `sku`, `zones`, and `tags` are defined as parameters.
- **Resources**: This section defines the public IP address resource.
    - The `type` is `Microsoft.Network/publicIPAddresses`.
    - The `name`, `location`, `sku`, `properties`, `zones`, and `tags` are set using the parameters.
- **Outputs**: This section provides the public IP address as an output.

You can deploy this ARM template using Azure CLI or Azure PowerShell. If you need further customization or have more scripts to convert, feel free to ask!

Source: Conversation with Copilot, 9/30/2024
(1) github.com. https://github.com/fjukstad/apim-creator-bug-example/tree/24965d0ddd2df4c729b8ed0729b7986bc870e14b/README.md.
(2) github.com. https://github.com/MicrosoftDocs/azure-docs.ru-ru/tree/980849d8505e40e8b260cb5a35b56e22d55fc9d3/articles%2Fazure-resource-manager%2Ftemplates%2Ftemplate-functions-resource.md.
            </code>
        </pre>
    </main>
    <script defer>
        'use strict';

        const appendImage = (blob) => {
            const img = document.createElement('img');
            img.src = URL.createObjectURL(blob);
            document.body.append(img);
        };

        document.addEventListener('paste', async (e) => {
            e.preventDefault();
            const clipboardItems = typeof navigator?.clipboard?.read === 'function' ? await navigator.clipboard.read() : e.clipboardData.files;

            for (const clipboardItem of clipboardItems) {
                let blob;
                console.log('clipboardItem.type: ', clipboardItem.type);
                if (clipboardItem.type?.startsWith('image/')) {
                    // For files from `e.clipboardData.files`.
                    blob = clipboardItem
                    // Do something with the blob.
                    appendImage(blob);
                } else {
                    // For files from `navigator.clipboard.read()`.
                    const imageTypes = clipboardItem.types?.filter(type => type.startsWith('image/'))
                    for (const imageType of imageTypes) {
                        blob = await clipboardItem.getType(imageType);
                        // Do something with the blob.
                        appendImage(blob);
                    }
                }
            }
        });

    </script>
    <script defer>
        let str = ''; document.querySelectorAll('pre button.copy-icon + .bg *').forEach(e => str += e.innerText + '\n'); console.table(str);

    //    document.querySelectorAll('pre > button.copy-icon *').forEach( el => el.querySelector('button.copy-icon').addEventListener('click', async (e) => {
    //         console.log('el:',el);
    //         try {
    //             var targetEl = el.querySelector('code.bg');
    //             console.log(targetEl);
    //             targetEl.focus();
    //             targetEl.select();
    //             let rsp = await navigator.clipboard.writeText(targetEl);
    //             console.log(rsp);
    //         } catch (err) {
    //             console.error('Failed to copy: ', err);
    //         }
    //     }));
    </script>
    <script defer>hljs.highlightAll();</script>
</body>

<!--
    Drop in copy and paste image from clipboard
    courtesy of:  https://web.dev/patterns/clipboard/paste-images#html
 -->
<!--
<html>
    <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🎉</text></svg>"
    />
    <title>How to paste images</title>
    <style>

:root {
  color-scheme: dark light;
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
}

body {
  margin: 1rem;
  font-family: system-ui, sans-serif;
}

button {
  display: block;
}
    </style>
  </head>
  <body>
    <h1>How to paste images</h1>
    <p>Hit <kbd>⌘</kbd> + <kbd>v</kbd> (for macOS) or <kbd>ctrl</kbd> + <kbd>v</kbd>
      (for other operating systems) to paste images anywhere in this page.
    </p>
<script defer>

document.addEventListener('paste', async (e) => {
  e.preventDefault();
  const clipboardItems = typeof navigator?.clipboard?.read === 'function' ? await navigator.clipboard.read() : e.clipboardData.files;

  for (const clipboardItem of clipboardItems) {
    let blob;
    if (clipboardItem.type?.startsWith('image/')) {
      // For files from `e.clipboardData.files`.
      blob = clipboardItem
      // Do something with the blob.
      appendImage(blob);
    } else {
      // For files from `navigator.clipboard.read()`.
      const imageTypes = clipboardItem.types?.filter(type => type.startsWith('image/'))
      for (const imageType of imageTypes) {
        blob = await clipboardItem.getType(imageType);
        // Do something with the blob.
        appendImage(blob);
      }
    }
  }
});

const appendImage = (blob) => {
  const img = document.createElement('img');
  img.src = URL.createObjectURL(blob);
  document.body.append(img);
};
   
</script>
  </body>

</html>

-->
</html>